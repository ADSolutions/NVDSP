<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>NVDSP - iOS DSP </title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>NVDSP</h1>
        <p>iOS/OSX DSP for audio (Novocaine)</p>
        <p class="view"><a href="https://github.com/bartolsthoorn/NVDSP">View the Project on GitHub <small>bartolsthoorn/NVDSP</small></a></p>
        <ul>
          <li><a href="https://github.com/bartolsthoorn/NVDSP/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/bartolsthoorn/NVDSP/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/bartolsthoorn/NVDSP">View On <strong>GitHub</strong></a></li>
        </ul>

				<p>Share it on Twitter:<br><a href="https://twitter.com/share" class="twitter-share-button" data-via="BartOlsthoorn" data-size="large" data-hashtags="NVDSP">Tweet</a>
				<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></p>
      </header>
      <section>
        <h2>High-performance DSP for audio on iOS and OSX with Novocaine.</h2>

<p>While Novocaine allows you to easily read/play audio, it is still quite hard to apply filters to the audio. This (Objective-C++) class will allow you to apply all sorts of filters (high-pass, band-pass, peaking EQ, shelving EQ etc.) in just a few lines of code.</p>

<h3>Quick introduction/example (highpass filter)</h3>

<div class="highlight">
<pre><span class="cp">// ... import Novocaine and audioFilerReader</span>
<span class="cp">#import "NVDSP/NVDSP.h"</span>
<span class="cp">#import "NVDSP/Filters/NVHighpassFilter.h"</span>

<span class="c1">// init Novocaine audioManager</span>
<span class="n">audioManager</span> <span class="o">=</span> <span class="p">[</span><span class="n">Novocaine</span> <span class="n">audioManager</span><span class="p">];</span>
<span class="kt">float</span> <span class="n">samplingRate</span> <span class="o">=</span> <span class="n">audioManager</span><span class="p">.</span><span class="n">samplingRate</span><span class="p">;</span>

<span class="c1">// init fileReader which we will later fetch audio from</span>
<span class="n">NSURL</span> <span class="o">*</span><span class="n">inputFileURL</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSBundle</span> <span class="n">mainBundle</span><span class="p">]</span> <span class="nl">URLForResource:</span><span class="s">@"Trentemoller-Miss-You"</span> <span class="nl">withExtension:</span><span class="s">@"mp3"</span><span class="p">];</span>

<span class="n">fileReader</span> <span class="o">=</span> <span class="p">[[</span><span class="n">AudioFileReader</span> <span class="n">alloc</span><span class="p">]</span> 
                  <span class="nl">initWithAudioFileURL:</span><span class="n">inputFileURL</span> 
                  <span class="nl">samplingRate:</span><span class="n">audioManager</span><span class="p">.</span><span class="n">samplingRate</span>
                  <span class="nl">numChannels:</span><span class="n">audioManager</span><span class="p">.</span><span class="n">numOutputChannels</span><span class="p">];</span>

<span class="c1">// setup Highpass filter</span>
<span class="n">NVHighpassFilter</span> <span class="o">*</span><span class="n">HPF</span><span class="p">;</span>
<span class="n">HPF</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NVHighpassFilter</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithSamplingRate:</span><span class="n">samplingRate</span><span class="p">];</span>

<span class="n">HPF</span><span class="p">.</span><span class="n">cornerFrequency</span> <span class="o">=</span> <span class="mf">2000.0f</span><span class="p">;</span>
<span class="n">HPF</span><span class="p">.</span><span class="n">Q</span> <span class="o">=</span> <span class="mf">0.5f</span><span class="p">;</span>

<span class="c1">// setup audio output block</span>
<span class="p">[</span><span class="n">fileReader</span> <span class="n">play</span><span class="p">];</span>
<span class="p">[</span><span class="n">audioManager</span> <span class="nl">setOutputBlock:</span><span class="o">^</span><span class="p">(</span><span class="kt">float</span> <span class="o">*</span><span class="n">outData</span><span class="p">,</span> <span class="n">UInt32</span> <span class="n">numFrames</span><span class="p">,</span> <span class="n">UInt32</span> <span class="n">numChannels</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">fileReader</span> <span class="nl">retrieveFreshAudio:</span><span class="n">outData</span> <span class="nl">numFrames:</span><span class="n">numFrames</span> <span class="nl">numChannels:</span><span class="n">numChannels</span><span class="p">];</span>

    <span class="p">[</span><span class="n">HPF</span> <span class="nl">filterData:</span><span class="n">outData</span> <span class="nl">numFrames:</span><span class="n">numFrames</span> <span class="nl">numChannels:</span><span class="n">numChannels</span><span class="p">];</span>
<span class="p">}];</span>
</pre>
</div>


<h3>More examples</h3>
More examples can be found in <a href="https://github.com/bartolsthoorn/NVDSP/blob/master/README.md">the README on Github</a>


<h3>A thing to note:</h3>

<p>The NVDSP class is written in C++, so the classes that use it will have to be Objective-C++. Change all the files that use NVDSP from MyClass.m to MyClass.mm.</p>

<h3>Thanks to</h3>

<p>Alex Wiltschko - Creator of <a href="http://alexbw.github.com/novocaine/">Novocaine</a></p>

<p>Yasoshima - Writer of <a href="http://objective-audio.jp/2008/02/biquad-filter.html">this article</a>, revealing how vDSP_deq22 works.</p>

<p>hrnt - Helpful on IRC #iphonedev (freenode)</p>
</section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/bartolsthoorn">bartolsthoorn</a></p>
				<p><a href="https://twitter.com/BartOlsthoorn" class="twitter-follow-button" data-show-count="false" data-size="large">Follow @BartOlsthoorn</a>
				<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-5535798-10");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>